# 이벤트 내용

## 이벤트 종류

### 크리스마스 디데이 할인

기간: 2023.12.01 ~ 2023.12.25

할인 금액: 2023.12.01 1,000원으로 시작하여, 매일 할인 금액이 100원씩 증가

할인 방법: 총 주문 금액에서 할인 금액만큼 할인

### 평일 할인

기간: 2023.12.01 ~ 2023.12.31 중 매주 일요일 ~ 목요일

할인 금액: 2,023원

할인 방법: 디저트 메뉴를 개당 할인 금액만큼 할인

### 주말 할인

기간: 2023.12.01 ~ 2023.12.31 중 매주 금요일, 토요일

할인 금액: 2,023원

할인 방법: 메인 메뉴를 개당 할인 금액만큼 할인

### 특별 할인

기간: 2023.12.01 ~ 2023.12.31 중 매주 일요일, 12월 25일

할인 금액: 1,000원

할인 방법: 총주문 금액에서 할인 금액만큼 할인

### 증정 이벤트

기간: 2023.12.01 ~ 2023.12.31

이벤트: 할인 전 총주문 금액이 12만원 이상일 때, 샴페인 1개 증정 (25,000원)

## 이벤트 배지

이벤트로 받은 총혜택 금액에 따라 각기 다른 이벤트 배지를 부여
(이때 `총혜택 금액 = 할인 금액의 합계 + 증정 메뉴의 가격`으로 계산)

- 5천원 이상: 별
- 1만원 이상: 트리
- 2만원 이상: 산타

## 이벤트 주의 사항

- 총주문 금액 10,000원 이상부터 이벤트가 적용
- 음료만 주문 시, 주문할 수 없음
- 메뉴는 한 번에 최대 20개까지만 주문할 수 있음 (종류가 아닌 개수)

# 개발 요청 사항

- [ ] 방문할 날짜 입력
    - [ ] 1 이상 31 이하의 숫자만 입력받음
- [ ] 주문할 메뉴와 개수 입력
    - [ ] 메뉴판에 있는 메뉴만 입력받음
    - [ ] 정해진 형식의 메뉴만 입력받음
    - [ ] 메뉴의 개수는 1 이상의 숫자만 입력받음
    - [ ] 중복되지 않은 메뉴만 입력받음
- [ ] 주문 메뉴 출력
    - [ ] 출력 순서는 자유롭게 출력
- [ ] 할인 전 총주문 금액 출력
- [ ] 증정 메뉴 출력
    - [ ] 증정 이벤트에 해당하지 않는 경우 `없음` 출력
- [ ] 혜택 내역 출력
    - [ ] 고객에게 적용된 이벤트 내역만 출력
    - [ ] 적용된 이벤트가 없는 경우 `없음` 출력
    - [ ] 이벤트 출력 순서는 자유롭게 출력
- [ ] 총혜택 금액 출력
    - [ ] `총혜택 금액 = 할인 금액의 합계 + 증정 메뉴의 가격`
- [ ] 할인 후 예상 결제 금액 출력
    - [ ] `할인 후 예상 결제 금액 = 할인 전 총주문 금액 - 할인금액`
- [ ] 12월 이벤트 배지 출력
    - [ ] 이벤트 배지가 부여되지 않는 경우 `없음` 출력

# 입력 예외 사항

- [ ] 방문할 날짜 입력 예외
    - [ ] 1 이상 31 이하의 숫자가 아닌 경우
        - `[ERROR] 유효하지 않은 날짜입니다. 다시 입력해 주세요.`
- [ ] 주문할 메뉴와 개수 입력
    - [ ] 메뉴판에 없는 메뉴를 입력
        - `[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.`
    - [ ] 메뉴의 개수가 1 이상의 정수가 아닌 경우
        - `[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.`
    - [ ] 메뉴의 형식이 정해진 형식을 벗어난 경우
        - `[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.`
    - [ ] 중복 메뉴를 입력한 경우
        - `[ERROR] 유효하지 않은 주문입니다. 다시 입력해 주세요.`
- 이외 모든 예외 사항에 `[ERROR]` Prefix 사용

# 기능 명세

## Domain

- [x] Order
    - [x] 주문 메뉴와 주문 수량을 저장
    - [x] 가격을 반환
    - [x] 메뉴의 종류를 반환
- [x] Bill
    - [x] 주문 리스트를 저장
    - [x] 주문 날짜를 저장
    - [x] 주문을 추가
    - [x] 전체 주문 금액을 계산
    - [x] 특정 타입의 메뉴 주문량을 반환
    - [x] 주문 날짜를 반환
- [x] Date
    - [x] 요일을 확인
    - [x] 주말인지 확인 -> 평일 할인, 주말 할인
    - [x] 달력에 별이 있는 특별한 날인지 확인 -> 특별 할인
    - [x] 크리스마스 이전인지 확인 -> 크리스마스 디데이 할인
- [x] EventHandler
    - [x] 증정 메뉴(샴페인) 존재 여부
    - [x] 혜택 내역
    - [x] 할인 금액
    - [x] 총혜택 금액
- [x] Event
    - [x] 이벤트 조건에 맞는지 확인
    - [x] 이벤트 혜택을 반환
    - [x] 종류
        - [x] ChristmasEvent
        - [x] WeekdayEvent
        - [x] WeekendEvent
        - [x] SpecialEvent
        - [x] ChampagneEvent

## Controller

- [x] Controller

## View

- [x] InputView
    - [x] 날짜 입력
    - [x] 주문 입력
- [x] OutputView
    - [x] 각 제목 출력
    - [x] 주문 메뉴 출력
    - [x] 할인 전 총주문 금액 출력
    - [x] 증정 메뉴 출력
    - [x] 혜택 내역 출력
    - [x] 총혜택 금액 출력
    - [x] 할인 후 예상 결제 금액 출력
    - [x] 이벤트 배지 출력
- [x] ViewMessage
- [x] ViewTitle

## Util

- [x] IntParser
- [x] OrderParser

## Menu

- [x] Menu (enum)
    - [x] 메뉴 이름으로 Menu 찾아 반환
- [x] MenuType (enum)

## Exception

- [x] ErrorMessage

# 테스트 코드

- [x] Badge
    - [x] `getBadgeNameWithBenefitPrice` 동작 확인
        - [x] 0 -> 없음
        - [x] 2500 -> 없음
        - [x] 5000 -> 별
        - [x] 9000 -> 별
        - [x] 10000 -> 트리
        - [x] 17000 -> 트리
        - [x] 20000 -> 산타
        - [x] 50000 -> 산타
- [x] Bill
    - [x] `from` 동작 확인
        - [x] 잘못된 date 값 사용시 예외 발생 -> Date 클래스에서 테스트
    - [x] `add` 동작 확인
    - [x] `add` 중복된 메뉴 입력시 예외 발생
    - [x] `add` 20개 이상 메뉴 입력시 예외 발생
        - [x] 여러 메뉴의 총 수량이 20개 이상인 경우
        - [x] 한 메뉴의 수량이 20개 이상인 경우
    - [x] `clearOrder` 동작 확인
    - [x] `getTotalPrice` 동작 확인
    - [x] `getTypeCount` 동작 확인
        - [x] DESSERT 타입 확인
        - [x] MAIN 타입 확인
    - [x] `getDateValue` 동작 확인
    - [x] 음료만 주문한 경우 예외 발생
    - [x] 이외의 Date 관련 메서드는 Date 클래스에서 테스트
- [x] Date
    - [x] 생성 시 `validate` 동작 확인
        - [x] 1 -> 동작
        - [x] 25 -> 동작
        - [x] 31 -> 동작
    - [x] 생성 시 `validate` 예외 발생
        - [x] -5 -> 예외 발생
        - [x] 0 -> 예외 발생
        - [x] 32 -> 예외 발생
        - [x] 75 -> 예외 발생
    - [x] `isWeekend` 동작 확인
        - [x] 1 -> true
        - [x] 8 -> true
        - [x] 16 -> true
        - [x] 17 -> false
        - [x] 25 -> false
        - [x] 28 -> false
    - [x] `isSpecialDay` 동작 확인
        - [x] 3 -> true
        - [x] 25 -> true
        - [x] 31 -> true
        - [x] 13 -> false
        - [x] 22 -> false
    - [x] `isNotPassedChristmas` 동작 확인
        - [x] 1 -> true
        - [x] 14 -> true
        - [x] 25 -> true
        - [x] 26 -> false
        - [x] 31 -> false
    - [x] `timePassedSinceFirstDay` 동작 확인
        - [x] 1 -> 0
        - [x] 18 -> 17
        - [x] 25 -> 24
- [x] Event
    - [x] `getEventName` 동작 확인
    - [x] `isDiscount` 동작 확인
    - [x] `checkCondition` 동작 확인
        - [x] 크리스마스 디데이 할인 -> `isNotPassedChristmas`에서 테스트
        - [x] 평일 할인 -> `isWeekend`에서 테스트
        - [x] 주말 할인 -> `isWeekend`에서 테스트
        - [x] 특별 할인 -> `isSpecialDay`에서 테스트
        - [x] 증정 이벤트
            - [x] 티본스테이크(2) + 아이스크림(2) = 120,000 -> true
            - [x] 티본스테이크(2) + 시저샐러드(5) = 150,000 -> true
            - [x] 바비큐립(1) + 양송이수프(1) = 60,000 -> false
    - [x] `getBenefit` 동작 확인
        - [x] 크리스마스 디데이 할인
            - [x] 1 -> 1000
            - [x] 11 -> 2000
            - [x] 25 -> 3400
        - [x] 평일 할인
            - [x] 양송이수프(1) + 바비큐립(1) -> 0
            - [x] 타파스(1) + 해산물파스타(1) + 초코케이크(2) -> 4046
            - [x] 바비큐립(2) + 초코케이크(2) + 아이스크림(3) -> 10115
        - [x] 주말 할인
            - [x] 양송이수프(2) + 제로콜라(2) -> 0
            - [x] 타파스(1) + 티본스테이크(1) -> 2023
            - [x] 티본스테이크(1) + 바비큐립(2) + 해산물파스타(3) + 제로콜라(6) -> 12138
        - [x] 특별 할인 -> 항상 1000
        - [x] 증정 이벤트 -> 항상 25000
    - [x] 모든 이벤트에서 총주문금액 10000원 이상부터 이벤트 적용
- [ ] EventHandler
    - [ ] `hasChampagneGift` 동작 확인 -> Event `checkCondition`에서 테스트
    - [ ] `getTotalDiscountPrice` 동작 확인
        - [ ] 1일, 티본스테이크(2) + 아이스크림(4) -> 5046
        - [ ] 3일, 티본스테이크(2) + 아이스크림(4) -> 10292
        - [ ] 13일, 해산물파스타(10) + 초코케이크(1) + 아이스크림(2) -> 8269
        - [ ] 25일, 크리스마스파스타(2) + 샴페인(2) -> 4400
        - [ ] 30일, 시저샐러드(5) + 바비큐립(2) + 티본스테이크(1) + 레드와인(2) -> 6069
    - [ ] `getTotalBenefitPrice` 동작 확인
        - [ ] 1일, 티본스테이크(2) + 아이스크림(4) -> 5046
        - [ ] 3일, 티본스테이크(2) + 아이스크림(4) -> 10292
        - [ ] 13일, 해산물파스타(10) + 초코케이크(1) + 아이스크림(2) -> 33269
        - [ ] 25일, 크리스마스파스타(2) + 샴페인(2) -> 4400
        - [ ] 30일, 시저샐러드(5) + 바비큐립(2) + 티본스테이크(1) + 레드와인(2) -> 31069
    - [ ] `getAllBenefit` 동작 확인
        - [ ] 1일, 티본스테이크(2) + 아이스크림(4) -> 크리스마스(1000), 주말(4046)
        - [ ] 3일, 티본스테이크(2) + 아이스크림(4) -> 크리스마스(1200), 평일(8092), 특별(1000)
        - [ ] 13일, 해산물파스타(10) + 초코케이크(1) + 아이스크림(2) -> 크리스마스(2200), 평일(6069), 증정(25000)
        - [ ] 25일, 크리스마스파스타(2) + 샴페인(2) -> 크리스마스(3400), 특별(1000)
        - [ ] 30일, 시저샐러드(5) + 바비큐립(2) + 티본스테이크(1) + 레드와인(2) -> 주말(6069), 증정(25000)
- [x] Order
    - [x] `create` 동작 확인
        - [x] 잘못된 메뉴 이름 사용시 예외 발생 -> Menu 클래스에서 테스트
        - [x] 잘못된 count 사용시 예외 발생
    - [x] `getPrice` 동작 확인
        - [x] 타파스(2) -> 11000
        - [x] 바비큐립(3) -> 162000
        - [x] 아이스크림(5) -> 25000
    - [x] `isSameMenu` 동작 확인
        - [x] 타파스, 타파스 -> true
        - [x] 레드와인, 레드와인 -> true
        - [x] 티본스테이크, 아이스크림 -> false
        - [x] 초코케이크, 바비큐립 -> false
    - [x] `accumulateCount` 동작 확인
        - [x] 티본스테이크(5) -> 5
        - [x] 양송이수프(3) + 바비큐립(1) + 아이스크림(3) -> 7
    - [x] `accumulateCount` type 사용하여 동작 확인
        - [x] DESSERT, 티본스테이크(2) + 제로콜라(4) -> 0
        - [x] MAIN, 양송이스프(3) + 바비큐립(1) + 해산물파스타(2) + 아이스크림(5) -> 3
- [x] Menu
    - [x] `from` 동작 확인
        - [x] 양송이수프 -> Menu.SOUP
        - [x] 해산물파스타 -> Menu.SEAFOOD_PASTA
    - [x] 메뉴판에 없는 메뉴 입력시 예외 확인
- [x] IntParser
    - [x] `parseIntOrThrow` 동작 확인
        - [x] "123" -> 123
        - [x] "-123" -> -123
        - [x] "2147483647" -> 2147483647 (최댓값)
        - [x] "-2147483648" -> -2147483648 (최솟값)
    - [x] 정수형태가 아닌 문자열 입력시 예외 발생
        - [x] ABC
        - [x] 12L
        - [x] 13.5
    - [x] Integer 범위를 벗어난 문자열 입력시 예외 발생
        - [x] 2147483648
        - [x] -2147483649
        - [x] 999999999999999
- [x] OrderParser
    - [x] `parseOrderOrThrow` 동작 확인
        - [x] "타파스-1,제로콜라-2,티본스테이크-5" -> 타파스(1) + 제로콜라(2) + 티본스테이크(5)
        - [x] "타파스 - 1, 제로콜라- 2, 티본 스테이크 -5" -> 타파스(1) + 제로콜라(2) + 티본스테이크(5)
        - [x] "티본스테이크-1" -> 티본스테이크(1)
        - [x] "해산물파스타-3 , " -> 해산물파스타(3)
    - [x] 잘못된 형식의 주문을 입력시 예외 발생
        - [x] "타파스: 1, 제로콜라: 2"
        - [x] "타파스-1 제로콜라-2 파스타-3"
        - [x] "타파스 1 제로콜라 2 파스타 3"
        - [x] "타파스, 제로콜라, 파스타"
        - [x] "타파스 -"
        - [x] "- 3"
- [x] OutputView
    - [x] `printHelloMessage` 동작 확인
    - [x] `printEventPreviewTitle` 동작 확인
    - [x] `printOrder` 동작 확인
    - [x] `printTotalPrice` 동작 확인
    - [x] `printGift` 동작 확인
    - [x] `printAllBenefit` 동작 확인
    - [x] `printBenefitPrice` 동작 확인
    - [x] `printAfterDiscountPrice` 동작 확인
    - [x] `printBadge` 동작 확인
